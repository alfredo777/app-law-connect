<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8">
 	<meta http-equiv="Content-Security-Policy" content="default-src *; style-src 'self' 'unsafe-inline' https://fonts.googleapis.com;  font-src 'self' https://fonts.gstatic.com data:; media-src *; img-src * data: content:; script-src 'self' http://* 'unsafe-inline' 'unsafe-eval';">
 	<meta Access-Control-Allow-Origin: * >
    <meta name="viewport" content="width=device-width, initial-scale=1  maximum-scale=1 user-scalable=no">
    <meta name="mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-touch-fullscreen" content="yes">
    <meta name="HandheldFriendly" content="True">
    <link rel="stylesheet" href="css/onsenui.css">
    <link rel="stylesheet" href="css/onsen-css-components.css">
    <link rel="stylesheet" href="css/particular.css">
    <link rel="stylesheet" href="css/w3.css">
    <link rel="stylesheet" href="js/jquery-ui.min.css">
    <script src="js/jquery.min.js"></script>
    <script src="js/onsenui.js"></script>
    <title>Law Connect</title>
</head>
<body id="newbody">
  Prueba de compile con js, cordova y funciones de arranque.
  <a onclick="arranqueApp();">Arrancar app</a>
</body>
    <script src="js/jquery-ui.min.js"></script>
	<script src="js/handlebarsx.js"></script>
    <script src="js/hb-helper.js"></script>
    <script type="text/javascript" src="cordova.js"></script>
    <script type="text/javascript">
	   var sessionIN = window.localStorage.getItem("loggedIn");

	   var menuITEM = {
			"compose": [
				{"id": 1, "Title": "Buscar", "Icon":"ion-search, material:md-search", "Content": "lorem ipsum", "Render": "search", "topbar": false },
				{"id": 2, "Title": "Mis Casos", "Icon":"list", "Content": "lorem ipsum", "Render": "casos", "topbar": false  },
				{"id": 3, "Title": "Alertas","Icon":"ion-ios-bell", "Content": "lorem impsum", "Render": "alertas", "topbar": true},
				{"id": 4, "Title": "Perfil","Icon":"ion-person", "Content": "lorem impsum", "Render": "profile", "topbar": false }
			]
		};

		var logginITEM = {
		"Title": "Law Connect",
		"Subtitle": "Ingreso",
		"Button": "Ingresar",
		"Placeuser": "Email",
		"Pplacepassword": "Contraseña",
		"Problem": "Describe el problema o queja",
		"Biddings": "Opcciones",
		"link1": "Registro",
		"link2": "Recuperar Contraseña",
		"link3": "¿Problemas?",
		"Button2": "Recuperar por email",
		"Button3": "Continuar como abogado &#x2713;",
		"Button4": "Terminar registro",
		"Button5": "Continuar como cliente &#x2713;",
		"Button6": "Enviar queja o sugerencia",
		"Nombre": "Nombre",
		"Apellidos": "Apellidos",
		"categorias": [
			{"id": 1, "title": "Derecho Laboral", "search": "derecho laboral", "icon": "fa-file", "class": "border-right-botton-solid"},
			{"id": 2, "title": "Derecho Administrativo", "search": "derecho administrativo", "icon": "fa-file", "class": "bottom-solid"},
			{"id": 3, "title": "Derechos de Autor", "search": "derechos de autor","icon": "fa-file", "class": "border-left-botton-solid"},
			{"id": 4, "title": "Derecho de lo Familiar", "search": "derecho familiar", "icon": "fa-file","class": "border-right-botton-solid"},
			{"id": 5, "title": "Derecho Fiscal", "search": "derecho fiscal", "icon": "fa-file","class": "bottom-solid"},
			{"id": 6, "title": "Derecho Penal", "search": "derecho penal","icon": "fa-file", "class": "border-left-botton-solid"},
			{"id": 7, "title": "Derecho Civil", "search": "derecho civil","icon": "fa-file", "class": "right-solid"},
			{"id": 8, "title": "Derecho Mercantil", "search": "derecho mercantil","icon": "fa-file", "class": ""}
		]

	    };


	   $(document).ready(function(){
	      var loggin = sessionLoggin();
	      console.log(loggin);
	      if(loggin == 1){
	      loadpage("menu","newbody","js/json/menu-tabs.json");
	      }else{
	      /*loadView(window.menuITEM, "menu", "newbody");
	      appendView(window.logginITEM, "loggin", "newbody");*/
	      loadpage("menu","newbody","js/json/menu-tabs.json");
	      appendpage("loggin","newbody","js/json/loggin.json");
	      }
	    });

	   function arranqueApp(){	   	  
	   	  var loggin = sessionLoggin();
	      console.log(loggin);
	      if(loggin == 1){
	      loadpage("menu","newbody","js/json/menu-tabs.json");
	      }else{
	      loadpage("menu","newbody","js/json/menu-tabs.json");
	      appendpage("loggin","newbody","js/json/loggin.json"); 
	      }
	   }

	   function sessionLoggin(callback){
	      var sessionNINg = window.sessionIN;
	      if(sessionNINg != 'true'){
	        window.localStorage.setItem("loggedIn", false);
	        var session = 0;
	      }else{
	        window.localStorage.setItem("loggedIn", true);
	        var session = 1;
	      }
	      sessionNINg = window.localStorage.getItem("loggedIn");
	      console.log(session);
	      console.log(sessionNINg);
	      return session;
	   }

	   function exit(){
	      sessionNINg = window.localStorage.setItem("loggedIn", false);
	      window.localStorage.setItem("userSession",'');
	      location.reload();
	    }

	    document.addEventListener("deviceready", listenDEvise, false);
	      function listenDEvise() {
	        console.log(device.uuid);
	        var device_data = {
	           modelo:      device.model,
	           plataforma:  device.platform,
	           uuid:        device.uuid,
	           version:     device.version,
	           manufacture: device.manufacturer,
	           virtual:     device.isVirtual,
	           serial:      device.serial
	        }

	        var deviceData = window.localStorage.setItem("devicePropieties", JSON.stringify(device_data));
	        deviceData = window.localStorage.getItem("devicePropieties");
	        console.log(deviceData);

	      }
    </script>

</html>

